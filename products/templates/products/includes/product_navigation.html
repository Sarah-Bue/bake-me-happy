<nav class="navbar navbar-expand-lg bg-body-tertiary" role="navigation" aria-label="Product categories navigation">
    <div class="container px-4 px-lg-5">
        <!-- Navbar Links -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent" role="menubar" aria-label="Product categories">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0" role="menubar" aria-label="Product categories">
                <li class="nav-item" role="none">
                    <a class="nav-link" href="{% url 'products' %}" role="menuitem" aria-label="Browse all products">
                        All Products
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a class="nav-link" href="{% url 'products' %}?category=breads_rolls" role="menuitem" aria-label="Browse breads and rolls">
                        Breads & Rolls
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a class="nav-link" href="{% url 'products' %}?category=cakes_tarts" role="menuitem" aria-label="Browse cakes and tarts">
                        Cakes & Tarts
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a class="nav-link" href="{% url 'products' %}?category=cookies_pastries" role="menuitem" aria-label="Browse cookies and pastries">
                        Cookies & Pastries
                    </a>
                </li>
            </ul>

            <!-- Sorting functionality - only visible on products page -->
            {% if request.resolver_match.url_name == 'products' %}
                <div class="ms-auto d-flex align-items-center">
                    <label for="sort-selector" class="me-2 mb-0 d-none d-sm-block">Sort by:</label>
                    <div class="sort-select-wrapper" style="width: 200px;">
                        <select id="sort-selector" aria-label="Sort products by" class="form-select form-select-sm border border-{% if current_sorting != 'None_None' %}primary{% else %}dark{% endif %}">
                            <option value="reset" {% if current_sorting == 'None_None' %}selected{% endif %}>Sort by...</option>
                            <option value="price_asc" {% if current_sorting == 'price_asc' %}selected{% endif %}>Price (low to high)</option>
                            <option value="price_desc" {% if current_sorting == 'price_desc' %}selected{% endif %}>Price (high to low)</option>
                            <option value="name_asc" {% if current_sorting == 'name_asc' %}selected{% endif %}>Name (A-Z)</option>
                            <option value="category_asc" {% if current_sorting == 'category_asc' %}selected{% endif %}>Category (A-Z)</option>
                            <option value="occasion_asc" {% if current_sorting == 'occasion_asc' %}selected{% endif %}>Occasion (A-Z)</option>
                            <option value="rating_desc" {% if current_sorting == 'rating_desc' %}selected{% endif %}>Rating (high to low)</option>
                            <option value="rating_asc" {% if current_sorting == 'rating_asc' %}selected{% endif %}>Rating (low to high)</option>
                        </select>
                    </div>
                </div>
            {% endif %}

            <!-- Search Bar-->
            <form class="d-flex ms-4" role="search" method="GET" action="{% url 'products' %}" aria-labelledby="search-form-label">
                <span id="search-form-label" class="visually-hidden">Search for products in our bakery</span>
                <div class="input-group">
                    <label for="product-search" class="visually-hidden">Search products</label>
                    <input 
                        id="product-search" 
                        class="form-control rounded me-2" 
                        name="q" 
                        type="search" 
                        placeholder="Search products" 
                        aria-describedby="search-button"
                        autocomplete="off"
                        aria-required="true">
                    <button 
                        id="search-button" 
                        class="btn btn-outline-dark rounded" 
                        type="submit" 
                        aria-label="Submit search">
                        <span class="d-flex align-items-center">
                            <i class="fas fa-search me-1" aria-hidden="true"></i>
                            <span>Search</span>
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</nav>