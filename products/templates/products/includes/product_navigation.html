{% load static %}
<nav class="navbar navbar-expand-lg bg-dark text-white border border-white d-none d-lg-block" role="navigation" aria-label="Product categories navigation">
    <div class="container px-4 px-lg-5">
        <!-- Navbar Links -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent" role="menubar" aria-label="Product categories">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0" role="menubar" aria-label="Product categories">
                <li class="nav-item" role="none">
                    <a class="nav-link text-decoration-none {% if request.resolver_match.url_name == 'products' and not request.GET.category %}text-warning{% else %}text-white{% endif %}" href="{% url 'products' %}" role="menuitem" aria-label="Browse all products">
                        All Products
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a class="nav-link text-decoration-none {% if request.resolver_match.url_name == 'breads_rolls' and not request.GET.category %}text-warning{% else %}text-white{% endif %}" href="{% url 'products' %}?category=breads_rolls" role="menuitem" aria-label="Browse breads and rolls">
                        Breads & Rolls
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a class="nav-link text-decoration-none {% if request.resolver_match.url_name == 'cakes_tarts' and not request.GET.category %}text-warning{% else %}text-white{% endif %}" href="{% url 'products' %}?category=cakes_tarts" role="menuitem" aria-label="Browse cakes and tarts">
                        Cakes & Tarts
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a class="nav-link text-decoration-none {% if request.resolver_match.url_name == 'cookies_pastries' and not request.GET.category %}text-warning{% else %}text-white{% endif %}" href="{% url 'products' %}?category=cookies_pastries" role="menuitem" aria-label="Browse cookies and pastries">
                        Cookies & Pastries
                    </a>
                </li>
            </ul>

            <!-- Search Bar-->
            <form class="d-flex ms-4" role="search" method="GET" action="{% url 'products' %}" aria-labelledby="search-form-label">
                <span id="search-form-label" class="visually-hidden">Search for products in our bakery</span>
                <div class="input-group">
                    <label for="product-search" class="visually-hidden">Search products</label>
                    <input 
                        id="product-search" 
                        class="form-control rounded me-2" 
                        name="q" 
                        type="search" 
                        placeholder="Search products" 
                        aria-describedby="search-button"
                        autocomplete="off"
                        aria-required="true">
                    <button 
                        id="search-button" 
                        class="btn btn-outline-light rounded" 
                        type="submit" 
                        aria-label="Submit search">
                        <span class="d-flex align-items-center">
                            <i class="fas fa-search me-1" aria-hidden="true"></i>
                            <span>Search</span>
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</nav>

<!-- Mobile icon navigation -->
<nav class="bg-dark d-lg-none w-100 border border-white" aria-label="Mobile product categories navigation">
    <div class="d-flex justify-content-around text-center py-2">
        <a href="{% url 'products' %}" class="text-decoration-none {% if request.resolver_match.url_name == 'products' and not request.GET.category %}text-warning{% else %}text-white{% endif %}" aria-label="Browse all products">
            <i class="fas fa-store"></i><br>
            <small>All</small>
        </a>
        <a href="{% url 'products' %}?category=breads_rolls" class="text-decoration-none {% if request.GET.category == 'breads_rolls' %}text-warning{% else %}text-white{% endif %}" aria-label="Browse breads and rolls">
            <i class="fas fa-bread-slice"></i><br>
            <small>Breads</small>
        </a>
        <a href="{% url 'products' %}?category=cakes_tarts" class="text-decoration-none {% if request.GET.category == 'cakes_tarts' %}text-warning{% else %}text-white{% endif %}" aria-label="Browse cakes and tarts">
            <i class="fas fa-birthday-cake"></i><br>
            <small>Cakes</small>
        </a>
        <a href="{% url 'products' %}?category=cookies_pastries" class="text-decoration-none {% if request.GET.category == 'cookies_pastries' %}text-warning{% else %}text-white{% endif %}" aria-label="Browse cookies and pastries">
            <i class="fas fa-cookie"></i><br>
            <small>Cookies</small>
        </a>
        <a href="#" class="text-decoration-none text-white" aria-label="Search products" id="mobile-search-toggle">
            <i class="fas fa-search"></i><br>
            <small>Search</small>
        </a>
    </div>
</nav>

<!-- Mobile search bar (hidden by default) -->
<div class="d-lg-none pt-3 pb-3 px-3 mt-2 border-top border-white" id="mobile-search-container" style="display: none;">
    <form role="search" method="GET" action="{% url 'products' %}" aria-labelledby="mobile-search-form-label">
        <span id="mobile-search-form-label" class="visually-hidden">Search for products in our bakery</span>
        <div class="input-group">
            <label for="mobile-product-search" class="visually-hidden">Search products</label>
            <input
                id="mobile-product-search"
                class="form-control rounded-start"
                name="q"
                type="search"
                placeholder="Search products"
                aria-describedby="mobile-search-button"
                autocomplete="off"
                aria-required="true">
            <button
                id="mobile-search-button"
                class="btn btn-dark rounded-end"
                type="submit"
                aria-label="Submit search">
                <i class="fas fa-search" aria-hidden="true"></i>
            </button>
        </div>
    </form>
</div>